<Window x:Class="EZStreamer.Views.SetupWizardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="EZStreamer - Quick Setup"
        Height="700"
        Width="900"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <materialDesign:Card Grid.Row="0" Margin="0" Padding="24" Background="#673AB7">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                    <materialDesign:PackIcon Kind="Wizard" Width="40" Height="40" Foreground="White"/>
                    <TextBlock Text="Welcome to EZStreamer!"
                             FontSize="28"
                             FontWeight="Bold"
                             Foreground="White"
                             Margin="16,0,0,0"
                             VerticalAlignment="Center"/>
                </StackPanel>
                <TextBlock Text="Let's get you set up in just a few easy steps! No technical knowledge required."
                         FontSize="14"
                         Foreground="White"
                         Opacity="0.9"/>

                <!-- Step Indicator -->
                <StackPanel Orientation="Horizontal" Margin="0,20,0,0" HorizontalAlignment="Center">
                    <StackPanel x:Name="Step1Indicator" Orientation="Horizontal" Margin="0,0,24,0">
                        <Ellipse x:Name="Step1Circle" Width="32" Height="32" Fill="White"/>
                        <TextBlock Text="1. Spotify" Foreground="White" VerticalAlignment="Center" Margin="8,0,0,0"/>
                    </StackPanel>
                    <Line X1="0" Y1="16" X2="40" Y2="16" Stroke="White" StrokeThickness="2" Opacity="0.5"/>
                    <StackPanel x:Name="Step2Indicator" Orientation="Horizontal" Margin="24,0,24,0">
                        <Ellipse x:Name="Step2Circle" Width="32" Height="32" Fill="White" Opacity="0.3"/>
                        <TextBlock Text="2. YouTube" Foreground="White" VerticalAlignment="Center" Margin="8,0,0,0" Opacity="0.5"/>
                    </StackPanel>
                    <Line X1="0" Y1="16" X2="40" Y2="16" Stroke="White" StrokeThickness="2" Opacity="0.5"/>
                    <StackPanel x:Name="Step3Indicator" Orientation="Horizontal" Margin="24,0,0,0">
                        <Ellipse x:Name="Step3Circle" Width="32" Height="32" Fill="White" Opacity="0.3"/>
                        <TextBlock Text="3. Twitch" Foreground="White" VerticalAlignment="Center" Margin="8,0,0,0" Opacity="0.5"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </materialDesign:Card>

        <!-- Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel x:Name="ContentPanel" Margin="32">

                <!-- Step 1: Spotify Setup -->
                <StackPanel x:Name="Step1Panel" Visibility="Visible">
                    <TextBlock Text="Step 1: Set Up Spotify (Recommended)"
                             FontSize="24"
                             FontWeight="Bold"
                             Margin="0,0,0,16"/>

                    <TextBlock TextWrapping="Wrap" Margin="0,0,0,20" FontSize="14" Opacity="0.8">
                        <Run Text="Spotify lets you play high-quality music for your viewers. It's super easy to set up!"/>
                    </TextBlock>

                    <!-- Visual Instructions -->
                    <materialDesign:Card Padding="20" Margin="0,0,0,16" Background="#F5F5F5">
                        <StackPanel>
                            <TextBlock Text="ðŸŽ¯ Here's what you need to do:" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <TextBlock Text="1ï¸âƒ£" FontSize="20" Margin="0,0,12,0"/>
                                <StackPanel>
                                    <TextBlock Text="Visit Spotify Developer Dashboard" FontWeight="Bold"/>
                                    <TextBlock>
                                        <Hyperlink NavigateUri="https://developer.spotify.com/dashboard" RequestNavigate="Hyperlink_RequestNavigate">
                                            https://developer.spotify.com/dashboard
                                        </Hyperlink>
                                    </TextBlock>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <TextBlock Text="2ï¸âƒ£" FontSize="20" Margin="0,0,12,0"/>
                                <TextBlock TextWrapping="Wrap">
                                    <Run Text="Click "/>
                                    <Run Text='"Create app"' FontWeight="Bold"/>
                                    <Run Text=" and fill in:"/>
                                    <LineBreak/>
                                    <Run Text="   â€¢ App name: EZStreamer (or anything you like)"/>
                                    <LineBreak/>
                                    <Run Text="   â€¢ App description: My song request tool"/>
                                </TextBlock>
                            </StackPanel>

                            <materialDesign:Card Background="#FFF59D" Padding="12" Margin="0,8,0,8">
                                <StackPanel>
                                    <TextBlock Text="âš ï¸ IMPORTANT:" FontWeight="Bold" Foreground="#F57C00"/>
                                    <TextBlock TextWrapping="Wrap" Margin="0,4,0,0">
                                        <Run Text="Redirect URI:" FontWeight="Bold"/>
                                        <Run Text=" Copy this EXACTLY:"/>
                                    </TextBlock>
                                    <Border Background="White" Padding="8" Margin="0,8,0,0" BorderBrush="#673AB7" BorderThickness="2">
                                        <StackPanel>
                                            <TextBlock x:Name="SpotifyRedirectURI"
                                                     Text="http://127.0.0.1:8888/callback"
                                                     FontFamily="Consolas"
                                                     FontWeight="Bold"
                                                     FontSize="14"/>
                                            <Button Content="ðŸ“‹ Copy to Clipboard"
                                                  Click="CopySpotifyURI_Click"
                                                  Style="{StaticResource MaterialDesignFlatButton}"
                                                  Margin="0,4,0,0"/>
                                        </StackPanel>
                                    </Border>
                                    <TextBlock Text="âš¡ Use 127.0.0.1, NOT localhost!"
                                             FontWeight="Bold"
                                             Foreground="#D32F2F"
                                             Margin="0,8,0,0"/>
                                </StackPanel>
                            </materialDesign:Card>

                            <StackPanel Orientation="Horizontal" Margin="0,8,0,8">
                                <TextBlock Text="3ï¸âƒ£" FontSize="20" Margin="0,0,12,0"/>
                                <TextBlock TextWrapping="Wrap">
                                    <Run Text="Copy your "/>
                                    <Run Text="Client ID" FontWeight="Bold"/>
                                    <Run Text=" and "/>
                                    <Run Text="Client Secret" FontWeight="Bold"/>
                                    <Run Text=" and paste them below"/>
                                </TextBlock>
                            </StackPanel>
                        </StackPanel>
                    </materialDesign:Card>

                    <!-- Input Fields -->
                    <TextBlock Text="Enter Your Spotify Credentials:" FontSize="16" FontWeight="Bold" Margin="0,16,0,12"/>

                    <StackPanel Margin="0,0,0,12">
                        <TextBlock Text="Client ID:" Margin="0,0,0,4"/>
                        <TextBox x:Name="SpotifyClientIdBox"
                               materialDesign:HintAssist.Hint="Paste your Client ID here"
                               FontSize="14"
                               Padding="8"/>
                        <TextBlock x:Name="SpotifyClientIdError"
                                 Text=""
                                 Foreground="Red"
                                 Margin="0,4,0,0"
                                 FontSize="12"
                                 Visibility="Collapsed"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,0,20">
                        <TextBlock Text="Client Secret:" Margin="0,0,0,4"/>
                        <PasswordBox x:Name="SpotifyClientSecretBox"
                                   materialDesign:HintAssist.Hint="Paste your Client Secret here"
                                   FontSize="14"
                                   Padding="8"/>
                        <TextBlock x:Name="SpotifyClientSecretError"
                                 Text=""
                                 Foreground="Red"
                                 Margin="0,4,0,0"
                                 FontSize="12"
                                 Visibility="Collapsed"/>
                    </StackPanel>

                    <Button x:Name="TestSpotifyButton"
                          Content="âœ… Test Spotify Connection"
                          Click="TestSpotify_Click"
                          Style="{StaticResource MaterialDesignRaisedButton}"
                          Background="#673AB7"
                          Foreground="White"
                          Height="40"
                          FontSize="14"
                          Margin="0,0,0,12"/>

                    <TextBlock x:Name="SpotifySuccessMessage"
                             Text=""
                             Foreground="Green"
                             FontWeight="Bold"
                             Margin="0,0,0,12"
                             Visibility="Collapsed"/>
                </StackPanel>

                <!-- Step 2: YouTube Setup -->
                <StackPanel x:Name="Step2Panel" Visibility="Collapsed">
                    <TextBlock Text="Step 2: Set Up YouTube (Optional)"
                             FontSize="24"
                             FontWeight="Bold"
                             Margin="0,0,0,16"/>

                    <TextBlock TextWrapping="Wrap" Margin="0,0,0,20" FontSize="14" Opacity="0.8">
                        <Run Text="YouTube gives you access to millions of songs, covers, and remixes! "/>
                        <Run Text="This step is optional - you can skip it if you only want Spotify." FontStyle="Italic"/>
                    </TextBlock>

                    <materialDesign:Card Padding="20" Margin="0,0,0,16" Background="#F5F5F5">
                        <StackPanel>
                            <TextBlock Text="ðŸŽ¯ Quick Setup Instructions:" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <TextBlock Text="1ï¸âƒ£" FontSize="20" Margin="0,0,12,0"/>
                                <StackPanel>
                                    <TextBlock Text="Go to Google Cloud Console" FontWeight="Bold"/>
                                    <TextBlock>
                                        <Hyperlink NavigateUri="https://console.cloud.google.com/" RequestNavigate="Hyperlink_RequestNavigate">
                                            https://console.cloud.google.com/
                                        </Hyperlink>
                                    </TextBlock>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <TextBlock Text="2ï¸âƒ£" FontSize="20" Margin="0,0,12,0"/>
                                <TextBlock TextWrapping="Wrap" Text="Create a new project (or select an existing one)"/>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <TextBlock Text="3ï¸âƒ£" FontSize="20" Margin="0,0,12,0"/>
                                <TextBlock TextWrapping="Wrap">
                                    <Run Text="Enable "/>
                                    <Run Text='"YouTube Data API v3"' FontWeight="Bold"/>
                                    <LineBreak/>
                                    <Run Text="   (Go to APIs &amp; Services â†’ Library)" FontStyle="Italic"/>
                                </TextBlock>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <TextBlock Text="4ï¸âƒ£" FontSize="20" Margin="0,0,12,0"/>
                                <TextBlock TextWrapping="Wrap">
                                    <Run Text="Create an API Key"/>
                                    <LineBreak/>
                                    <Run Text="   (Go to APIs &amp; Services â†’ Credentials â†’ Create Credentials â†’ API Key)" FontStyle="Italic"/>
                                </TextBlock>
                            </StackPanel>
                        </StackPanel>
                    </materialDesign:Card>

                    <TextBlock Text="Enter Your YouTube API Key:" FontSize="16" FontWeight="Bold" Margin="0,16,0,12"/>

                    <StackPanel Margin="0,0,0,20">
                        <TextBlock Text="API Key:" Margin="0,0,0,4"/>
                        <TextBox x:Name="YouTubeAPIKeyBox"
                               materialDesign:HintAssist.Hint="Paste your YouTube API Key here"
                               FontSize="14"
                               Padding="8"/>
                        <TextBlock x:Name="YouTubeAPIKeyError"
                                 Text=""
                                 Foreground="Red"
                                 Margin="0,4,0,0"
                                 FontSize="12"
                                 Visibility="Collapsed"/>
                    </StackPanel>

                    <Button x:Name="TestYouTubeButton"
                          Content="âœ… Test YouTube Connection"
                          Click="TestYouTube_Click"
                          Style="{StaticResource MaterialDesignRaisedButton}"
                          Background="#FF0000"
                          Foreground="White"
                          Height="40"
                          FontSize="14"
                          Margin="0,0,0,12"/>

                    <TextBlock x:Name="YouTubeSuccessMessage"
                             Text=""
                             Foreground="Green"
                             FontWeight="Bold"
                             Margin="0,0,0,12"
                             Visibility="Collapsed"/>
                </StackPanel>

                <!-- Step 3: Twitch Setup -->
                <StackPanel x:Name="Step3Panel" Visibility="Collapsed">
                    <TextBlock Text="Step 3: Connect to Twitch"
                             FontSize="24"
                             FontWeight="Bold"
                             Margin="0,0,0,16"/>

                    <TextBlock TextWrapping="Wrap" Margin="0,0,0,20" FontSize="14" Opacity="0.8">
                        <Run Text="Connect to your Twitch channel so viewers can request songs in your chat!"/>
                    </TextBlock>

                    <materialDesign:Card Padding="20" Margin="0,0,0,16" Background="#F5F5F5">
                        <StackPanel>
                            <TextBlock Text="ðŸŽ¯ Quick Setup:" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>

                            <TextBlock TextWrapping="Wrap" Margin="0,0,0,12">
                                <Run Text="1ï¸âƒ£ Enter your Twitch username below"/>
                                <LineBreak/>
                                <Run Text="2ï¸âƒ£ Click "/>
                                <Run Text='"Connect to Twitch"' FontWeight="Bold"/>
                                <LineBreak/>
                                <Run Text="3ï¸âƒ£ Log in when the browser opens"/>
                                <LineBreak/>
                                <Run Text="4ï¸âƒ£ Done! You're ready to stream! ðŸŽ‰" FontWeight="Bold"/>
                            </TextBlock>
                        </StackPanel>
                    </materialDesign:Card>

                    <TextBlock Text="Your Twitch Channel:" FontSize="16" FontWeight="Bold" Margin="0,16,0,12"/>

                    <StackPanel Margin="0,0,0,20">
                        <TextBlock Text="Channel Name:" Margin="0,0,0,4"/>
                        <TextBox x:Name="TwitchChannelBox"
                               materialDesign:HintAssist.Hint="Enter your Twitch username (without @)"
                               FontSize="14"
                               Padding="8"/>
                        <TextBlock Text="Example: If your channel is twitch.tv/mychannel, enter: mychannel"
                                 Opacity="0.6"
                                 FontSize="11"
                                 Margin="0,4,0,0"/>
                    </StackPanel>

                    <Button x:Name="ConnectTwitchButton"
                          Content="âœ… Connect to Twitch"
                          Click="ConnectTwitch_Click"
                          Style="{StaticResource MaterialDesignRaisedButton}"
                          Background="#9146FF"
                          Foreground="White"
                          Height="40"
                          FontSize="14"
                          Margin="0,0,0,12"/>

                    <TextBlock x:Name="TwitchSuccessMessage"
                             Text=""
                             Foreground="Green"
                             FontWeight="Bold"
                             Margin="0,0,0,12"
                             Visibility="Collapsed"/>
                </StackPanel>

                <!-- Completion Step -->
                <StackPanel x:Name="CompletionPanel" Visibility="Collapsed">
                    <materialDesign:PackIcon Kind="CheckCircle"
                                           Width="100"
                                           Height="100"
                                           Foreground="#4CAF50"
                                           HorizontalAlignment="Center"
                                           Margin="0,40,0,20"/>

                    <TextBlock Text="ðŸŽ‰ You're All Set!"
                             FontSize="32"
                             FontWeight="Bold"
                             HorizontalAlignment="Center"
                             Margin="0,0,0,16"/>

                    <TextBlock Text="EZStreamer is ready to use! Here's what you can do now:"
                             FontSize="16"
                             HorizontalAlignment="Center"
                             Opacity="0.8"
                             Margin="0,0,0,32"/>

                    <materialDesign:Card Padding="20" Margin="0,0,0,12" Background="#E8F5E9">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Chat" Width="24" Height="24" Margin="0,0,12,0"/>
                            <TextBlock TextWrapping="Wrap">
                                <Run Text="Viewers can request songs by typing: " FontWeight="Bold"/>
                                <Run Text="!songrequest Song Name" FontFamily="Consolas" Foreground="#673AB7"/>
                            </TextBlock>
                        </StackPanel>
                    </materialDesign:Card>

                    <materialDesign:Card Padding="20" Margin="0,0,0,12" Background="#E3F2FD">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="QueueMusic" Width="24" Height="24" Margin="0,0,12,0"/>
                            <TextBlock TextWrapping="Wrap">
                                <Run Text="Song requests will appear in the "/>
                                <Run Text='"Song Queue"' FontWeight="Bold"/>
                                <Run Text=" tab"/>
                            </TextBlock>
                        </StackPanel>
                    </materialDesign:Card>

                    <materialDesign:Card Padding="20" Margin="0,0,0,32" Background="#FFF3E0">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Settings" Width="24" Height="24" Margin="0,0,12,0"/>
                            <TextBlock TextWrapping="Wrap">
                                <Run Text="You can customize everything in the "/>
                                <Run Text="Settings" FontWeight="Bold"/>
                                <Run Text=" tab"/>
                            </TextBlock>
                        </StackPanel>
                    </materialDesign:Card>

                    <Button Content="ðŸš€ Start Using EZStreamer"
                          Click="Finish_Click"
                          Style="{StaticResource MaterialDesignRaisedButton}"
                          Background="#4CAF50"
                          Foreground="White"
                          Height="50"
                          FontSize="16"
                          FontWeight="Bold"
                          HorizontalAlignment="Center"
                          Padding="32,0"/>
                </StackPanel>

            </StackPanel>
        </ScrollViewer>

        <!-- Navigation Buttons -->
        <Border Grid.Row="2" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0">
            <Grid Margin="24,16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Button x:Name="SkipButton"
                      Grid.Column="0"
                      Content="â­ï¸ Skip This Step"
                      Click="Skip_Click"
                      Style="{StaticResource MaterialDesignFlatButton}"
                      HorizontalAlignment="Left"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="BackButton"
                          Content="â—€ï¸ Back"
                          Click="Back_Click"
                          Style="{StaticResource MaterialDesignOutlinedButton}"
                          Margin="0,0,12,0"
                          Visibility="Collapsed"/>

                    <Button x:Name="NextButton"
                          Content="Next â–¶ï¸"
                          Click="Next_Click"
                          Style="{StaticResource MaterialDesignRaisedButton}"
                          Background="#673AB7"
                          Foreground="White"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
